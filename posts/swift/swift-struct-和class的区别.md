---
title: struct 和class的区别
tags: [struct]
categories: [swift]
date: 2016-08-15 15:58:34
---
  1. struct是`值类型`，值类型在传递和赋值时将进行复制。
  
    class是`引用类型`，引用类型只会使用引用对象的一个『指向』</p> 
  2. class有这几个功能struct没有的：

    class可以继承，这样子类可以使用父类的特性和方法
    类型转换可以在runtime的时候检查和解释一个实例的类型
    可以用deinit来释放资源
    一个类可以被多次引用
    

struct也有这样几个优势：

    结构较小，适用于复制操作，相比于一个class的实例被多次引用更加安全
    无须担心内存memory leak或者多线程冲突问题


顺便提一下，array在swift中是用struct实现的。Apple重写过一次array，然后复制就是深度拷贝了。猜测复制是类似参照那样，通过栈上指向堆上位置的指针来实现的。而对于它的复制操作，也是在相对空间较为宽裕的堆上来完成的，所以性能上还是不错的。