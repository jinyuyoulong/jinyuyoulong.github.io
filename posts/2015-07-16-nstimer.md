---
title: NSTimer
author: fan
type: post
date: 2015-07-16T03:03:51+00:00
url: /nstimer/
duoshuo_thread_id:
  - 6278603296395494145
  - 6278603296395494145
categories:
  - iOS
tags:
  - iOS
  - NSTimer
  - 控件

---
<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;">转载自</span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;">NSTimer的使用方法</span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;">1、初始化</span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;">+ (NSTimer *)timerWithTimeInterval:(NSTimeInterval)ti target:(id)aTarget selector:(SEL)aSelector userInfo:(id)userInfo repeats:(BOOL)yesOrNo;</span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;"><br /></span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;">+ (NSTimer *)scheduledTimerWithTimeInterval:(NSTimeInterval)ti target:(id)aTarget selector:(SEL)aSelector userInfo:(id)userInfo repeats:(BOOL)yesOrNo;</span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;"><br /></span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;">注：不用scheduled方式初始化的，需要手动addTimer:forMode: 将timer添加到一个runloop中。</span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;">　　而scheduled的初始化方法将以默认mode直接添加到当前的runloop中.</span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
   
</p>

<span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px;"></span><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; background-color: rgb(255, 255, 255);"></span>

<p style="color: rgb(51, 51, 51); white-space: normal; margin-top: 0px; margin-bottom: 0px; margin-left: 36px; font-size: 13px; font-family: 'Lucida Grande'; text-indent: -36px;">
  <span style="font-size: 18px;">scheduledTimerWithTimeInterval:<span style="font-size: 13px; font-family: Courier;">(NSTimeInterval)</span>seconds  </span>
</p>

<p style="color: rgb(51, 51, 51); white-space: normal; margin-top: 0px; margin-bottom: 0px; margin-left: 36px; font-size: 13px; font-family: 'Heiti SC Light'; text-indent: -36px;">
  <span style="font-size: 18px;">预订一个Timer,设置一个时间间隔。</span>
</p>

<p style="color: rgb(51, 51, 51); white-space: normal; margin-top: 0px; margin-bottom: 0px; font-size: 13px; font-family: 'Heiti SC Light';">
  <span style="font-size: 18px;">表示输入一个时间间隔对象，以秒为单位，一个>0的浮点类型的值，如果该值<0,系统会默认为0.1</span>
</p>

<p style="color: rgb(51, 51, 51); white-space: normal; margin-top: 0px; margin-bottom: 0px; margin-left: 36px; font-size: 13px; font-family: 'Lucida Grande'; text-indent: -36px;">
  <span style="font-size: 18px;"> target:(id)aTarget</span>
</p>

<p style="color: rgb(51, 51, 51); white-space: normal; margin-top: 0px; margin-bottom: 0px; margin-left: 36px; font-size: 13px; font-family: 'Heiti SC Light'; text-indent: -36px;">
  <span style="font-size: 18px;">表示发送的对象，如<span style="font-size: 13px; font-family: 'Lucida Grande';">self</span></span>
</p>

<p style="color: rgb(51, 51, 51); white-space: normal; margin-top: 0px; margin-bottom: 0px; margin-left: 36px; font-size: 13px; font-family: 'Lucida Grande'; text-indent: -36px;">
  <span style="font-size: 18px;"> selector:(SEL)aSelector</span>
</p>

<p style="color: rgb(51, 51, 51); white-space: normal; margin-top: 0px; margin-bottom: 0px; margin-left: 36px; font-size: 13px; font-family: 'Heiti SC Light'; text-indent: -36px;">
  <span style="font-size: 18px;">方法选择器，在时间间隔内，选择调用一个实例方法</span>
</p>

<p style="color: rgb(51, 51, 51); white-space: normal; margin-top: 0px; margin-bottom: 0px; margin-left: 36px; font-size: 13px; font-family: 'Lucida Grande'; text-indent: -36px;">
  <span style="font-size: 18px;">userInfo:(id)userInfo</span>
</p>

<p style="color: rgb(51, 51, 51); white-space: normal; margin-top: 0px; margin-bottom: 0px; margin-left: 36px; font-size: 13px; font-family: 'Heiti SC Light'; text-indent: -36px;">
  <span style="font-size: 18px;">此参数可以为nil，当定时器失效时，由你指定的对象保留和释放该定时器。</span>
</p>

<p style="color: rgb(51, 51, 51); white-space: normal; margin-top: 0px; margin-bottom: 0px; margin-left: 36px; font-size: 13px; font-family: 'Lucida Grande'; text-indent: -36px;">
  <span style="font-size: 18px;">repeats:(BOOL)yesOrNo</span>
</p>

<p style="color: rgb(51, 51, 51); white-space: normal; margin-top: 0px; margin-bottom: 0px; margin-left: 36px; font-size: 13px; font-family: 'Heiti SC Light'; text-indent: -36px;">
  <span style="font-size: 18px;">当<span style="font-size: 13px; font-family: 'Lucida Grande';">YES</span>时，定时器会不断循环直至失效或被释放，当NO时，定时器会循环发送一次就失效。</span>
</p>

<p style="color: rgb(51, 51, 51); white-space: normal; margin-top: 0px; margin-bottom: 0px; margin-left: 36px; font-size: 13px; font-family: Courier; text-indent: -36px;">
  <span style="font-size: 24px;">invocation:(NSInvocation *)invocation</span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
   
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;">举例：(不可控)</span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;">NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:10.0 target:self selector:@selector(timerFired:) userInfo:nil repeats:NO];</span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;">或(可控制)</span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;">NSTimer *<span class="s1">myTimer</span><span class="s2"> = [</span><span class="s3">NSTimer </span>timerWithTimeInterval<span class="s2">:</span><span class="s4">3.0 </span>target<span class="s2">:</span><span class="s5">self</span>selector<span class="s2">:</span><span class="s5">@selector</span><span class="s2">(timerFired:)</span>userInfo<span class="s2">:</span><span class="s5">nil</span>repeats<span class="s2">:</span><span class="s5">NO</span><span class="s2">]</span><span class="s2">;</span></span>
</p>

<p class="p1" style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;"><span class="s2">[[</span><span class="s3">NSRunLoop  </span>currentRunLoop<span class="s2">]</span>addTimer<span class="s2">:</span><span class="s1">myTimer</span>forMode<span class="s2">:</span><span class="s3">NSDefaultRunLoopMode</span><span class="s2">];</span></span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;"> </span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;">2、触发（启动）</span>
</p>

<p style="color: rgb(51, 51, 51); font-family:
Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;">当定时器创建完（不用scheduled的，添加到runloop中后，该定时器将在初始化时指定的timeInterval秒后自动触发。</span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;"></span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;">可以使用-(void)fire;方法来立即触发该定时器；</span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;">注：You can use this method to fire a repeating timer without interrupting its regular firing schedule. If the timer is non-repeating, it is automatically invalidated after firing, even if its scheduled fire date has not arrived.</span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;">在重复执行的定时器中调用此方法后立即触发该定时器，但不会中断其之前的执行计划；</span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;">在不重复执行的定时器中调用此方法，立即触发后，就会使这个定时器失效。</span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;"> </span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;">3、停止</span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;">&#8211; (void)invalidate;</span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;">这个是唯一一个可以将计时器从runloop中移出的方法。</span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;"> </span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;">注：</span>
</p>

<p style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;">
  <span style="font-size: 18px;">NSTimer可以精确到50-100毫秒.</span>
</p>

<
  
p style=&#8221;color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; white-space: normal;&#8221;><span style="font-size: 18px;">NSTimer不是绝对准确的,而且中间耗时或阻塞错过下一个点,那么下一个点就pass过去了.</span>