<!doctype html>
<html lang="zh-CN">
  <head>
    <title>NSTimer // 为吾优</title>
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.55.5" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="fanjinlong" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="https://jinyuyoulong.github.io/css/main.min.59023e5fd38d6ecb0e1dfbb295077c3c67e00e3b9eb3feaf34b5a5e6b332897a.css" />

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="NSTimer"/>
<meta name="twitter:description" content="转载自
NSTimer的使用方法
1、初始化
&#43; (NSTimer *)timerWithTimeInterval:(NSTimeInterval)ti target:(id)aTarget selector:(SEL)aSelector userInfo:(id)userInfo repeats:(BOOL)yesOrNo;

&#43; (NSTimer *)scheduledTimerWithTimeInterval:(NSTimeInterval)ti target:(id)aTarget selector:(SEL)aSelector userInfo:(id)userInfo repeats:(BOOL)yesOrNo;

注：不用scheduled方式初始化的，需要手动addTimer:forMode: 将timer添加到一个runloop中。
而scheduled的初始化方法将以默认mode直接添加到当前的runloop中.
&nbsp;

scheduledTimerWithTimeInterval:(NSTimeInterval)seconds &nbsp;
预订一个Timer,设置一个时间间隔。
表示输入一个时间间隔对象，以秒为单位，一个&gt;0的浮点类型的值，如果该值&lt;0,系统会默认为0.1
&nbsp;target:(id)aTarget
表示发送的对象，如self
&nbsp;selector:(SEL)aSelector
方法选择器，在时间间隔内，选择调用一个实例方法
userInfo:(id)userInfo
此参数可以为nil，当定时器失效时，由你指定的对象保留和释放该定时器。
repeats:(BOOL)yesOrNo
当YES时，定时器会不断循环直至失效或被释放，当NO时，定时器会循环发送一次就失效。
invocation:(NSInvocation *)invocation
&nbsp;
举例：(不可控)
NSTimer *timer&nbsp;= [NSTimer&nbsp;scheduledTimerWithTimeInterval:10.0&nbsp;target:self&nbsp;selector:@selector(timerFired:)&nbsp;userInfo:nil&nbsp;repeats:NO];
或(可控制)
NSTimer *myTimer&nbsp;= [NSTimer&nbsp;timerWithTimeInterval:3.0&nbsp;target:selfselector:@selector(timerFired:)userInfo:nilrepeats:NO];
[[NSRunLoop &nbsp;currentRunLoop]addTimer:myTimerforMode:NSDefaultRunLoopMode];
&nbsp;
2、触发（启动）
当定时器创建完（不用scheduled的，添加到runloop中后，该定时器将在初始化时指定的timeInterval秒后自动触发。

可以使用-(void)fire;方法来立即触发该定时器；
注：You can use this method to fire a repeating timer without interrupting its regular firing schedule. If the timer is non-repeating, it is automatically invalidated after firing, even if its scheduled fire date has not arrived."/>

    <meta property="og:title" content="NSTimer" />
<meta property="og:description" content="转载自
NSTimer的使用方法
1、初始化
&#43; (NSTimer *)timerWithTimeInterval:(NSTimeInterval)ti target:(id)aTarget selector:(SEL)aSelector userInfo:(id)userInfo repeats:(BOOL)yesOrNo;

&#43; (NSTimer *)scheduledTimerWithTimeInterval:(NSTimeInterval)ti target:(id)aTarget selector:(SEL)aSelector userInfo:(id)userInfo repeats:(BOOL)yesOrNo;

注：不用scheduled方式初始化的，需要手动addTimer:forMode: 将timer添加到一个runloop中。
而scheduled的初始化方法将以默认mode直接添加到当前的runloop中.
&nbsp;

scheduledTimerWithTimeInterval:(NSTimeInterval)seconds &nbsp;
预订一个Timer,设置一个时间间隔。
表示输入一个时间间隔对象，以秒为单位，一个&gt;0的浮点类型的值，如果该值&lt;0,系统会默认为0.1
&nbsp;target:(id)aTarget
表示发送的对象，如self
&nbsp;selector:(SEL)aSelector
方法选择器，在时间间隔内，选择调用一个实例方法
userInfo:(id)userInfo
此参数可以为nil，当定时器失效时，由你指定的对象保留和释放该定时器。
repeats:(BOOL)yesOrNo
当YES时，定时器会不断循环直至失效或被释放，当NO时，定时器会循环发送一次就失效。
invocation:(NSInvocation *)invocation
&nbsp;
举例：(不可控)
NSTimer *timer&nbsp;= [NSTimer&nbsp;scheduledTimerWithTimeInterval:10.0&nbsp;target:self&nbsp;selector:@selector(timerFired:)&nbsp;userInfo:nil&nbsp;repeats:NO];
或(可控制)
NSTimer *myTimer&nbsp;= [NSTimer&nbsp;timerWithTimeInterval:3.0&nbsp;target:selfselector:@selector(timerFired:)userInfo:nilrepeats:NO];
[[NSRunLoop &nbsp;currentRunLoop]addTimer:myTimerforMode:NSDefaultRunLoopMode];
&nbsp;
2、触发（启动）
当定时器创建完（不用scheduled的，添加到runloop中后，该定时器将在初始化时指定的timeInterval秒后自动触发。

可以使用-(void)fire;方法来立即触发该定时器；
注：You can use this method to fire a repeating timer without interrupting its regular firing schedule. If the timer is non-repeating, it is automatically invalidated after firing, even if its scheduled fire date has not arrived." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jinyuyoulong.github.io/post/ios-nstimer/" />
<meta property="article:published_time" content="2015-07-16T11:03:51&#43;00:00"/>
<meta property="article:modified_time" content="2015-07-16T11:03:51&#43;00:00"/>


  </head>
  <body>
    <header class="app-header">
      <a href="https://jinyuyoulong.github.io"><img class="app-header-avatar" src="/avatar.jpg" alt="fanjinlong" /></a>
      <h1>为吾优</h1>
      <p>愿我走在通往幸福的路上</p>
      <div class="app-header-social">
        
          <a target="_blank" href="https://github.com/jinyuyoulong"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg></a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">NSTimer</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Jul 16, 2015
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          1 min read
        </div><div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line>
</svg>
          <a class="tag" href="https://jinyuyoulong.github.io/tags/nstimer/">NSTimer</a><a class="tag" href="https://jinyuyoulong.github.io/tags/%E6%8E%A7%E4%BB%B6/">控件</a></div></div>
    </header>
    <div class="post-content">
      <p><span style="font-size: 18px;">转载自</span></p>

<p><span style="font-size: 18px;">NSTimer的使用方法</span></p>

<p><span style="font-size: 18px;">1、初始化</span></p>

<p><span style="font-size: 18px;">+ (NSTimer *)timerWithTimeInterval:(NSTimeInterval)ti target:(id)aTarget selector:(SEL)aSelector userInfo:(id)userInfo repeats:(BOOL)yesOrNo;</span></p>

<p><span style="font-size: 18px;">
</span></p>

<p><span style="font-size: 18px;">+ (NSTimer *)scheduledTimerWithTimeInterval:(NSTimeInterval)ti target:(id)aTarget selector:(SEL)aSelector userInfo:(id)userInfo repeats:(BOOL)yesOrNo;</span></p>

<p><span style="font-size: 18px;">
</span></p>

<p><span style="font-size: 18px;">注：不用scheduled方式初始化的，需要手动addTimer:forMode: 将timer添加到一个runloop中。</span></p>

<p><span style="font-size: 18px;">　　而scheduled的初始化方法将以默认mode直接添加到当前的runloop中.</span></p>

<p>&nbsp;</p>

<p><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px;"></span><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; background-color: rgb(255, 255, 255);"></span></p>

<p><span style="font-size: 18px;">scheduledTimerWithTimeInterval:<span style="font-size: 13px; font-family: Courier;">(NSTimeInterval)</span>seconds &nbsp;</span></p>

<p><span style="font-size: 18px;">预订一个Timer,设置一个时间间隔。</span></p>

<p><span style="font-size: 18px;">表示输入一个时间间隔对象，以秒为单位，一个&gt;0的浮点类型的值，如果该值&lt;0,系统会默认为0.1</span></p>

<p><span style="font-size: 18px;">&nbsp;target:(id)aTarget</span></p>

<p><span style="font-size: 18px;">表示发送的对象，如<span style="font-size: 13px; font-family: &#39;Lucida Grande&#39;;">self</span></span></p>

<p><span style="font-size: 18px;">&nbsp;selector:(SEL)aSelector</span></p>

<p><span style="font-size: 18px;">方法选择器，在时间间隔内，选择调用一个实例方法</span></p>

<p><span style="font-size: 18px;">userInfo:(id)userInfo</span></p>

<p><span style="font-size: 18px;">此参数可以为nil，当定时器失效时，由你指定的对象保留和释放该定时器。</span></p>

<p><span style="font-size: 18px;">repeats:(BOOL)yesOrNo</span></p>

<p><span style="font-size: 18px;">当<span style="font-size: 13px; font-family: &#39;Lucida Grande&#39;;">YES</span>时，定时器会不断循环直至失效或被释放，当NO时，定时器会循环发送一次就失效。</span></p>

<p><span style="font-size: 24px;">invocation:(NSInvocation *)invocation</span></p>

<p>&nbsp;</p>

<p><span style="font-size: 18px;">举例：(不可控)</span></p>

<p><span style="font-size: 18px;">NSTimer *timer&nbsp;= [NSTimer&nbsp;scheduledTimerWithTimeInterval:10.0&nbsp;target:self&nbsp;selector:@selector(timerFired:)&nbsp;userInfo:nil&nbsp;repeats:NO];</span></p>

<p><span style="font-size: 18px;">或(可控制)</span></p>

<p><span style="font-size: 18px;">NSTimer *<span class="s1">myTimer</span><span class="s2">&nbsp;= [</span><span class="s3">NSTimer&nbsp;</span>timerWithTimeInterval<span class="s2">:</span><span class="s4">3.0&nbsp;</span>target<span class="s2">:</span><span class="s5">self</span>selector<span class="s2">:</span><span class="s5">@selector</span><span class="s2">(timerFired:)</span>userInfo<span class="s2">:</span><span class="s5">nil</span>repeats<span class="s2">:</span><span class="s5">NO</span><span class="s2">]</span><span class="s2">;</span></span></p>

<p><span style="font-size: 18px;"><span class="s2">[[</span><span class="s3">NSRunLoop &nbsp;</span>currentRunLoop<span class="s2">]</span>addTimer<span class="s2">:</span><span class="s1">myTimer</span>forMode<span class="s2">:</span><span class="s3">NSDefaultRunLoopMode</span><span class="s2">];</span></span></p>

<p><span style="font-size: 18px;">&nbsp;</span></p>

<p><span style="font-size: 18px;">2、触发（启动）</span></p>

<p><span style="font-size: 18px;">当定时器创建完（不用scheduled的，添加到runloop中后，该定时器将在初始化时指定的timeInterval秒后自动触发。</span></p>

<p><span style="font-size: 18px;"></span></p>

<p><span style="font-size: 18px;">可以使用-(void)fire;方法来立即触发该定时器；</span></p>

<p><span style="font-size: 18px;">注：You can use this method to fire a repeating timer without interrupting its regular firing schedule. If the timer is non-repeating, it is automatically invalidated after firing, even if its scheduled fire date has not arrived.</span></p>

<p><span style="font-size: 18px;">在重复执行的定时器中调用此方法后立即触发该定时器，但不会中断其之前的执行计划；</span></p>

<p><span style="font-size: 18px;">在不重复执行的定时器中调用此方法，立即触发后，就会使这个定时器失效。</span></p>

<p><span style="font-size: 18px;">&nbsp;</span></p>

<p><span style="font-size: 18px;">3、停止</span></p>

<p><span style="font-size: 18px;">- (void)invalidate;</span></p>

<p><span style="font-size: 18px;">这个是唯一一个可以将计时器从runloop中移出的方法。</span></p>

<p><span style="font-size: 18px;">&nbsp;</span></p>

<p><span style="font-size: 18px;">注：</span></p>

<p><span style="font-size: 18px;">NSTimer可以精确到50-100毫秒.</span></p>

<p><span style="font-size: 18px;">NSTimer不是绝对准确的,而且中间耗时或阻塞错过下一个点,那么下一个点就pass过去了.</span></p>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
